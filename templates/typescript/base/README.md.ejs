# <%- projectName %>

GÃ©nÃ©rÃ© avec **create-template-api** le <%- createdAt %>.

## ğŸš€ Modules inclus

- SÃ©curitÃ© HTTP (Helmet, CORS, rate limiting) et logging Pino.
- Validation des entrÃ©es avec Zod et middleware de gestion d'erreurs.
- Documentation OpenAPI servie sur `/docs` et collection Insomnia.
- Endpoint de diagnostic `/status` dÃ©taillant l'Ã©tat de l'API et des fonctionnalitÃ©s actives.
<% if (featureSummaries.length) { %>
<% featureSummaries.forEach((summary) => { %>- <%- summary %>
<% }); %>
<% } %>

<% if (dataProviderSummaries.length) { %>
## ğŸ—„ï¸ Persistance & stockage prÃ©parÃ©s

<% dataProviderSummaries.forEach((summary) => { %>- <%- summary %>
<% }); %>
<% } else { %>
## ğŸ—„ï¸ Persistance & stockage

- Aucune intÃ©gration de base de donnÃ©es ou de stockage n'a Ã©tÃ© sÃ©lectionnÃ©e. Branchez vos adapters dans `src/infrastructure`.
<% } %>

## ğŸ—‚ Architecture hexagonale

```
src/
â”œâ”€â”€ domain/           # ModÃ¨le mÃ©tier et contrats
â”œâ”€â”€ application/      # Cas d'usage, services et erreurs
â”œâ”€â”€ infrastructure/   # Adapters, configuration et conteneur d'injection
â””â”€â”€ interface/http/   # Routes, contrÃ´leurs, middlewares, docs et DTOs
```

Chaque couche ne dÃ©pend que de la prÃ©cÃ©dente afin de garantir testabilitÃ© et Ã©volutivitÃ©.

## ğŸ”§ Installation & exÃ©cution

```bash
<%- packageManagerCommands.install %>
<%- packageManagerCommands.run %> dev
```

### VÃ©rification rapide

```bash
curl http://localhost:3333/status
```

Vous obtenez un instantanÃ© JSON avec l'Ã©tat global, les fonctionnalitÃ©s activÃ©es, les dÃ©pendances simulÃ©es
et les liens utiles. Pour un simple ping, `GET /health` reste disponible.

<% const apiStatusCommand = packageManager === 'npm' ? 'npm run api -- --status' : packageManager === 'pnpm' ? 'pnpm api --status' : 'yarn api --status'; %>

### Diagnostic assistÃ© en CLI

```bash
<%- apiStatusCommand %>
```

Ce script lance automatiquement `GET /health` et `GET /status`, vÃ©rifie les fonctionnalitÃ©s choisies ainsi que les options
de persistance dÃ©clarÃ©es et vous alerte si une dÃ©pendance critique est en erreur. Un rÃ©sumÃ© lisible prÃ©sente les modules
actifs, l'Ã©tat des stockages configurÃ©s et les diagnostics agrÃ©gÃ©s.
<% if (features.includes('auth')) { %>

### ScÃ©nario d'authentification prÃªt Ã  l'emploi

Deux comptes de dÃ©monstration sont prÃ©chargÃ©s :

| Email | Mot de passe | RÃ´le |
| ----- | ------------ | ---- |
| `admin@example.com` | `Admin#1234` | admin |
| `client@example.com` | `Client#1234` | client |

Inscrivez un utilisateur, connectez-vous et rafraÃ®chissez votre token sans Ã©crire de code :

```bash
# Inscription
curl -X POST http://localhost:3333/auth/register \
  -H "Content-Type: application/json" \
  -d '{"name":"Ada","email":"ada@example.com","password":"Str0ng#Pass"}'

# Connexion administrateur (nÃ©cessite jq pour extraire le token)
ACCESS_TOKEN=$(curl -s -X POST http://localhost:3333/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@example.com","password":"Admin#1234"}' | jq -r '.tokens.accessToken')

# Profil courant
curl -H "Authorization: Bearer ${ACCESS_TOKEN}" http://localhost:3333/me
```
<% } %>

### Principaux scripts

| Script | Commande |
| ------ | -------- |
<% Object.entries(scripts).forEach(([name, command]) => { %>| <%- name %> | `<%- command %>` |
<% }); %>

## ğŸ“š Documentation

- Swagger/OpenAPI disponible sur [`/docs`](http://localhost:3333/docs).
- Collection Insomnia gÃ©nÃ©rÃ©e dans `docs/insomnia/collection.json`.
- AperÃ§u temps rÃ©el sur [`/status`](http://localhost:3333/status).

## ğŸ§ª Tests

```bash
<%- packageManagerCommands.run %> test
```

Les tests reposent sur Jest et Supertest. Des doubles in-memory permettent d'isoler les cas d'usage des dÃ©pendances.
Chaque fonctionnalitÃ© activÃ©e dispose de scÃ©narios de bout en bout : flux d'authentification, gestion complÃ¨te des
utilisateurs (crÃ©ation, consultation, mise Ã  jour, suppression) et espaces client / admin lorsqu'ils sont sÃ©lectionnÃ©s.

## ğŸ›¡ SÃ©curitÃ© & bonnes pratiques

- Middleware globaux : Helmet, CORS configurables, rate limiting.
- Journalisation structurÃ©e via Pino (pretty logging en dÃ©veloppement).
- Validation centralisÃ©e avec Zod et rÃ©ponses d'erreur normalisÃ©es.
<% if (features.includes('auth')) { %>- Tokens JWT signÃ©s, rotation de refresh token et hashage des mots de passe.
<% } %>
<% if (features.includes('clientPortal') || features.includes('adminPortal')) { %>- ContrÃ´le d'accÃ¨s basÃ© sur les rÃ´les pour les espaces dÃ©diÃ©s.
<% } %>

## â–¶ï¸ Aller plus loin

- Ajoutez de nouveaux cas d'usage dans `src/application/use-cases`.
- ImplÃ©mentez vos propres adaptateurs (email, files, etc.) dans `src/infrastructure`.
- Ã‰tendez la documentation via `src/interface/http/docs/openapi.ts`.

Bon dÃ©veloppement ! ğŸš€
